# Chapter 15: The Documentation Interlude

## Overview

This chapter explores Python's documentation system, including how to document your own code and how to access documentation for Python's built-in tools. Python provides both syntax and tools to make documentation easier, with the Pydoc system being a key component that can render documentation as plain text or HTML.

## Python Documentation Sources

### Documentation Hierarchy (by verbosity)

| Form | Role | Usage |
|------|------|-------|
| `# comments` | In-file documentation | Basic code comments |
| `dir()` function | Lists of attributes | Object attribute exploration |
| Docstrings `__doc__` | In-file documentation attached to objects | Formal documentation |
| `help()` function | Interactive help | Plain text documentation |
| Pydoc HTML reports | Module documentation in browser | Rich documentation |
| Sphinx | Third-party documentation tool | Professional documentation |
| Standard manuals | Official language/library descriptions | Comprehensive reference |
| Web resources | Online tutorials and examples | Community resources |

## Basic Documentation Methods

### Hash Comments (`#`)

```python
# This is a basic comment
x = 5  # Variable assignment comment

# Best practices:
# - Use for small-scale code documentation
# - Explain "why" rather than "what"
# - Keep comments concise and relevant
```

**Best Practices:**
- Use for smaller code documentation (expressions, statements)
- Limit scope to a statement or small group of statements
- Docstrings are better for larger functional documentation

### The `dir()` Function

```python
# Basic usage
import sys
dir(sys)  # Lists all attributes in sys module

# Filter out internal attributes
len(dir(sys))  # Total attributes: 110
len([x for x in dir(sys) if not x.startswith('__')])  # Non-internal: 97
len([x for x in dir(sys) if not x[0] == '_'])  # Public only: 83

# Built-in types
dir('')  # String methods
dir([])  # List methods  
dir({})  # Dictionary methods

# Filter and display useful methods
[a for a in dir(list) if not a.startswith('__')]
# ['append', 'clear', 'copy', 'count', 'extend', 'index', 'insert', 'pop', 'remove', 'reverse', 'sort']

[a for a in dir(dict) if not a.startswith('__')]
# ['clear', 'copy', 'fromkeys', 'get', 'items', 'keys', 'pop', 'popitem', 'setdefault', 'update', 'values']
```

## Docstrings (`__doc__`)

### User-Defined Docstrings

Docstrings are string literals that appear at the beginning of modules, functions, classes, and methods.

```python
"""
Module documentation
This module defines a name, function and class.
"""

edition = 6

def square(x):
    r'''
    Function documentation
    Returns the \square\ of its \numeric\ argument.
    '''
    return x ** 2

class PartVI:
    "Class documentation for Python"
    pass
```

### Docstring Rules

1. **String Types**: Any string literal except f-strings and bytes
2. **Position**: Must be first statement in module/function/class
3. **Access**: Stored in `__doc__` attribute
4. **Content**: Can contain Unicode, raw strings, multiline text

### Accessing Docstrings

```python
import docstrings

# Module docstring
print(docstrings.__doc__)

# Function docstring
print(docstrings.square.__doc__)

# Class docstring
print(docstrings.PartVI.__doc__)
```

### Built-in Docstrings

```python
# Built-in modules
import sys
print(sys.__doc__)

# Built-in functions
print(sys.getrefcount.__doc__)
print(map.__doc__)

# Built-in types
print(str.replace.__doc__)
```

## Pydoc System

### The `help()` Function

Interactive help system that formats docstrings and structural information.

#### Basic Usage

```python
# Built-in modules
import sys
help(sys)
help(sys.getrefcount)

# Without importing (using strings)
help('sys')
help('sys.getrefcount')

# Built-in types
help(dict)      # Entire dictionary type
help(str.replace)  # Specific method
help(''.replace)   # Method on instance
help(ord)          # Built-in function
```

#### Help on Your Code

```python
import docstrings
help(docstrings.square)   # Function help
help(docstrings.PartVI)   # Class help
help(docstrings)          # Entire module help
```

### Pydoc HTML Interface

#### Starting the Browser Interface

```bash
# Start Pydoc server with browser
python3 -m pydoc -b

# Alternative commands
pydoc3 -b          # Linux/macOS
# Windows: "Module Docs" in Start menu
```

#### Features

- **Index Page**: Lists all available modules
- **Search**: Find modules and topics
- **Module Pages**: Formatted documentation for each module
- **Cross-references**: Links between related items
- **Local Server**: Runs on localhost with arbitrary port

#### Customization

```python
# Find Pydoc location
import pydoc
print(pydoc.__file__)

# CSS customization file location
# Edit: .../pydoc_data/_pydoc.css
```

### Pydoc Usage Notes

**Import Behavior:**
- Pydoc imports files to extract documentation
- Importing runs top-level code
- Scripts will execute when viewed
- Use `if __name__ == '__main__':` to prevent unwanted execution

**Path Requirements:**
- Only files on module search path are accessible
- Includes current directory and standard library
- Set `PYTHONPATH` for other directories

**Additional Options:**
```bash
pydoc -w module    # Save HTML to file
pydoc module       # Plain text mode
pydoc             # Show all options
```

## Documentation Standards

### Docstring Best Practices

```python
def example_function(param1, param2):
    """
    Brief description of function purpose.
    
    More detailed description if needed.
    Can span multiple lines.
    
    Args:
        param1 (type): Description of parameter
        param2 (type): Description of parameter
        
    Returns:
        type: Description of return value
        
    Raises:
        ExceptionType: Description of when raised
    """
    pass
```

### Comment vs Docstring Guidelines

| Use Comments For | Use Docstrings For |
|------------------|-------------------|
| Explaining complex expressions | Module purpose and usage |
| Clarifying algorithm steps | Function/method behavior |
| Temporary notes | Class descriptions |
| Implementation details | API documentation |
| Single statements | Public interfaces |

## Beyond Basic Documentation

### Sphinx Documentation System

**Features:**
- Used for Python's official documentation
- Supports multiple output formats (HTML, PDF, etc.)
- Automatic cross-references and indexes
- Code highlighting with Pygments
- reStructuredText markup language

**When to Use:**
- Large projects requiring professional documentation
- API documentation with cross-references
- Documentation that needs multiple output formats
- Projects requiring sophisticated formatting

### Standard Python Manuals

**Key Sections:**
- **Library Reference**: Built-in types, functions, exceptions, standard library
- **Language Reference**: Formal language specifications
- **What's New**: Changes in each Python version
- **Tutorial**: Beginner-friendly introduction

**Access Methods:**
- Online: docs.python.org
- Windows: Start menu "Manuals" entry
- IDLE: Help menu "Python Docs"
- Local installation possible

## Common Documentation Pitfalls

### Avoid These Mistakes

```python
# DON'T: Use f-strings for docstrings
def bad_function():
    f"This won't work as a docstring"  # Invalid
    pass

# DON'T: Place docstrings after code
def another_bad_function():
    x = 1
    "This is too late"  # Won't be recognized
    return x

# DON'T: Forget to update docstrings
def outdated_function(x, y):
    "This function takes one parameter"  # Wrong!
    return x + y

# DO: Proper docstring placement
def good_function(x, y):
    """
    This function adds two numbers.
    
    Args:
        x (int): First number
        y (int): Second number
        
    Returns:
        int: Sum of x and y
    """
    return x + y
```

### Documentation Maintenance

- Keep docstrings synchronized with code changes
- Update examples when interfaces change
- Review documentation during code reviews
- Use consistent formatting and style

## Practical Examples

### Module Documentation Template

```python
"""
Module Name: my_utilities

Description:
    This module provides utility functions for data processing
    and file operations.

Author: Your Name
Date: 2024
Version: 1.0

Example:
    >>> import my_utilities
    >>> result = my_utilities.process_data(data)
    >>> print(result)
"""

# Module constants
VERSION = "1.0"

def process_data(data):
    """
    Process input data and return cleaned result.
    
    This function removes duplicates and sorts the data.
    
    Args:
        data (list): List of items to process
        
    Returns:
        list: Cleaned and sorted data
        
    Example:
        >>> process_data([3, 1, 2, 1])
        [1, 2, 3]
    """
    return sorted(list(set(data)))
```

### Class Documentation Template

```python
class DataProcessor:
    """
    A class for processing and analyzing data.
    
    This class provides methods for cleaning, transforming,
    and analyzing datasets.
    
    Attributes:
        data (list): The dataset being processed
        processed (bool): Whether data has been processed
        
    Example:
        >>> processor = DataProcessor([1, 2, 3, 4, 5])
        >>> processor.clean_data()
        >>> print(processor.get_stats())
    """
    
    def __init__(self, data):
        """
        Initialize the DataProcessor.
        
        Args:
            data (list): Initial dataset
        """
        self.data = data
        self.processed = False
    
    def clean_data(self):
        """
        Clean the dataset by removing invalid entries.
        
        Returns:
            None: Modifies data in place
        """
        # Implementation here
        self.processed = True
```

## Documentation Tools and Workflow

### Using Help Effectively

```python
# Quick reference
help(len)          # Built-in function
help(str.split)    # Method documentation
help('MODULES')    # List all modules

# Interactive help mode
help()             # Enter interactive help
# Type topic names directly
# Type 'q' to quit

# Exploring objects
import json
help(json)         # Module overview
dir(json)          # Available attributes
help(json.loads)   # Specific function
```

### Documentation Generation Workflow

1. **Write Code**: Include docstrings as you code
2. **Test Documentation**: Use `help()` to verify formatting
3. **Generate HTML**: Use Pydoc for rich documentation
4. **Review**: Check for completeness and accuracy
5. **Maintain**: Update docs with code changes

## Key Takeaways

### Best Practices Summary

1. **Use Appropriate Documentation Types**:
   - Comments for implementation details
   - Docstrings for public interfaces
   - Sphinx for large projects

2. **Follow Conventions**:
   - Place docstrings immediately after definition
   - Use triple quotes for multi-line docstrings
   - Include examples when helpful

3. **Keep Documentation Current**:
   - Update docs with code changes
   - Review during code reviews
   - Test examples regularly

4. **Leverage Python's Tools**:
   - Use `help()` for quick reference
   - Use Pydoc for comprehensive documentation
   - Use `dir()` for exploration

### Documentation as Code Quality

- **Readable Code**: Good documentation makes code self-explanatory
- **Maintenance**: Proper docs reduce maintenance burden  
- **Collaboration**: Clear documentation helps team development
- **User Experience**: Good docs improve library/module usability

### Progressive Documentation Strategy

1. **Start Simple**: Begin with basic docstrings
2. **Add Examples**: Include usage examples
3. **Expand Coverage**: Document edge cases and exceptions
4. **Polish Presentation**: Use tools like Sphinx for final polish
5. **Maintain**: Keep documentation synchronized with code

This documentation system provides a complete toolkit for creating, maintaining, and accessing documentation in Python projects of any size.