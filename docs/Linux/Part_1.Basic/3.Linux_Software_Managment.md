# Linux Software Management - Chapter 3 Notes

## Overview
Software management is a crucial aspect of Linux system administration. This chapter covers various package types, management commands, and installation procedures across different Linux distributions.

## Topics Covered
- Linux software package types
- Managing software packages
- Installing new desktop environments in Linux

---

## Linux Software Package Types

### Repository Concept
- **Repository**: A centrally managed location containing software packages maintained by developers
- Contains individual applications or operating system-related files
- Each Linux distribution includes several official repositories
- Additional repositories can be added as needed

### Main Package Types

#### 1. DEB Packages (Debian/Ubuntu)
- Used by Ubuntu and Debian-based distributions
- Binary packages containing program files, dependencies, and meta-information

#### 2. RPM Packages (Red Hat/Fedora)
- Used by Fedora, CentOS, RHEL, AlmaLinux, Rocky Linux, SUSE, openSUSE
- Similar structure to DEB packages but different format

#### 3. Snap Packages
- Developed by Canonical (Ubuntu)
- Cross-platform compatibility
- Run in isolated containers for security
- Available through Snap Store

#### 4. Flatpak Packages
- Developed by community (GNOME, Red Hat, Endless)
- Desktop application focused
- Sandboxed execution
- Available through Flathub

---

## DEB Package Management

### Package Anatomy
DEB packages contain:
- **debian-binary**: Package format version (usually 2.0)
- **control.tar.gz**: Meta-information and installation scripts
- **data.tar.xz**: Executable files and libraries
- **GPG signature file**: Security verification

### Examining DEB Packages
```bash
# Install required tools
sudo apt install binutils

# Download package
wget https://downloads.1password.com/linux/debian/amd64/stable/1password-latest.deb

# View package contents
ar t 1password-latest.deb

# Extract package contents
ar x 1password-latest.deb

# Check package format version
cat debian-binary

# View data contents
tar tJf data.tar.xz | head
```

![Figure 3.1 – Using the ar command to view the contents of a deb file](images/fig3-1-ar-command.png)

![Figure 3.2 – The contents of a deb package](images/fig3-2-deb-contents.png)

### Ubuntu/Debian Repositories
Located in `/etc/apt/sources.list`

#### Ubuntu Repositories:
- **Main**: Free and open source software supported by Canonical
- **Universe**: Free and open source software supported by community
- **Restricted**: Proprietary software
- **Multiverse**: Copyright-restricted software

#### Debian Repositories:
- **main**: Debian free software guidelines compliant
- **contrib**: May or may not be free software compliant
- **non-free**: Not open source, not free software compliant

### APT Commands

#### Basic Operations
```bash
# Update package list
sudo apt update

# Install package
sudo apt install package_name

# Remove package (keep config files)
sudo apt remove package_name

# Remove package and config files
sudo apt purge package_name

# Remove with purge option
sudo apt remove --purge package_name

# Remove unnecessary packages
sudo apt autoremove
```

#### System Updates
```bash
# Update package list and upgrade system
sudo apt update; sudo apt upgrade

# Distribution upgrade
sudo apt dist-upgrade
# or
sudo apt full-upgrade
```

#### Package Information
```bash
# Search for packages
sudo apt search package_name

# Show package details
apt show package_name

# List all packages
sudo apt list

# List installed packages only
sudo apt list --installed
```

![Figure 3.5 – The most commonly used apt commands](images/fig3-5-apt-commands.png)

![Figure 3.6 – Output of the apt search command](images/fig3-6-apt-search.png)

![Figure 3.7 – The output of the apt-cache command](images/fig3-7-apt-cache.png)

---

## RPM Package Management

### Package Anatomy
RPM packages are archive-based and contain:
- Application files with installation locations
- Meta-information (name, version, architecture, dependencies)
- Installation scripts and requirements

### Examining RPM Packages
```bash
# Download RPM package
wget https://downloads.1password.com/linux/rpm/stable/x86_64/1password-latest.rpm

# List package contents
rpm -qpl 1password-latest.rpm

# Show package meta-information
rpm -qpi 1password-latest.rpm

# Show package dependencies
rpm -qp --requires 1password-latest.rpm
```

![Figure 3.3 – Meta-information of the rpm package](images/fig3-3-rpm-meta.png)

![Figure 3.4 – Package requirements](images/fig3-4-package-requirements.png)

### Fedora/RHEL Repositories
- Configuration stored in `/etc/yum.repos.d/`
- Main configuration in `/etc/yum.conf`

![Figure 3.8 – RHEL derivative repositories](images/fig3-8-rhel-repos.png)

### YUM/DNF Commands

#### Package Installation/Removal
```bash
# Install from repository
sudo yum install package_name

# Install local package
sudo yum localinstall package_name.rpm

# Remove package
sudo yum remove package_name
```

#### System Updates
```bash
# Upgrade system
sudo yum upgrade
# or
sudo yum update

# Security updates only
sudo yum upgrade-minimal
```

#### Package Information
```bash
# View command history
sudo yum history

# Show package information
yum info package_name

# List all packages
yum list

# List installed packages
yum list installed
```

![Figure 3.9 – Using the yum history command](images/fig3-9-yum-history.png)

![Figure 3.10 – Using the yum info command](images/fig3-10-yum-info.png)

![Figure 3.11 – Excerpt of the yum list installed command](images/fig3-11-yum-list.png)

---

## Zypper Package Management (openSUSE)

### Basic Operations
```bash
# Search for packages
sudo zypper search package_name

# Install package
sudo zypper install package_name
# Short version
sudo zypper in package_name

# Remove package
sudo zypper remove package_name
# Short version
sudo zypper rm package_name

# Remove with dependencies
sudo zypper rm --clean-deps package_name
```

![Figure 3.12 – Using the zypper search command in openSUSE](images/fig3-12-zypper-search.png)

![Figure 3.13 – Using the zypper in command](images/fig3-13-zypper-install.png)

![Figure 3.14 – Checking the status of nmap with zypper search](images/fig3-14-zypper-status.png)

![Figure 3.15 – Using the zypper remove command](images/fig3-15-zypper-remove.png)

![Figure 3.16 – Removing dependencies](images/fig3-16-remove-deps.png)

### System Updates
```bash
# Check available updates
zypper list-updates

# Update system
sudo zypper update
# Short version
sudo zypper up
```

### Package Locks
```bash
# Add lock to package
sudo zypper addlock package_name
# Short version
sudo zypper al package_name

# List locked packages
zypper ll

# Remove lock
sudo zypper removelock package_name
# Short version
sudo zypper rl package_name
```

![Figure 3.17 – Adding and removing locks to and from packages with Zypper](images/fig3-17-zypper-locks.png)

![Figure 3.18 – Trying to remove a locked package](images/fig3-18-locked-package.png)

### Package Information
```bash
# Show package information
sudo zypper info package_name
```

![Figure 3.19 – Using the zypper info command](images/fig3-19-zypper-info.png)

---

## Snap Package Management

### Snap Characteristics
- **File Type**: SquashFS file with encapsulated filesystem
- **Isolation**: Restrictive environment with specific confinement rules
- **Usage**: Desktop applications, server apps, embedded applications
- **Origin**: Ubuntu Snappy for IoT and phones

### Basic Snap Commands

#### Search and Install
```bash
# Search for snap packages
snap find "package_name"

# Install snap package
sudo snap install package_name

# Install from specific channel
sudo snap install package_name --channel=channel_name
```

![Figure 3.20 – Installing the Slack snap package](images/fig3-20-snap-install.png)

#### Package Information
```bash
# Show package information
snap info package_name

# List installed snaps
snap list
```

![Figure 3.21 – Snap channels shown for the Slack app](images/fig3-21-snap-channels.png)

![Figure 3.22 – Output of the snap list command](images/fig3-22-snap-list.png)

#### Package Management
```bash
# Update snap package
sudo snap refresh package_name

# Revert to previous version
sudo snap revert package_name

# Disable snap package
sudo snap disable package_name

# Enable snap package
sudo snap enable package_name

# Remove snap package
sudo snap remove package_name

# Remove with purge (no snapshots)
sudo snap remove --purge package_name
```

![Figure 3.23 – Enabling and disabling a snap app](images/fig3-23-snap-enable-disable.png)

#### Snapshot Management
```bash
# List saved snapshots
snap saved

# Delete snapshot
sudo snap forget snapshot_id
```

![Figure 3.24 – Showing the existing snapshots after removal](images/fig3-24-snapshots.png)

![Figure 3.25 – Showing the saved snapshots](images/fig3-25-saved-snapshots.png)

![Figure 3.26 – Using the snap forget command to delete a snapshot](images/fig3-26-snap-forget.png)

---

## Flatpak Package Management

### Flatpak Characteristics
- **Technology**: Based on OSTree (similar to Git for OS)
- **Sandboxing**: Uses Bubblewrap for container features
- **Focus**: Desktop applications only
- **Naming**: Uses reverse domain notation (com.company.App)

### Repository Management
```bash
# Add Flathub repository
sudo flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo
```

### Package Operations
```bash
# Install application (full name)
sudo flatpak install flathub com.obsproject.Studio

# Install application (simple name - flatpak 1.2+)
sudo flatpak install package_name

# Run application
flatpak run com.obsproject.Studio

# Update all applications
sudo flatpak update

# Remove application
sudo flatpak uninstall com.obsproject.Studio

# List all flatpaks
flatpak list

# List applications only
flatpak list --app
```

![Figure 3.27 – The flatpak list command's output](images/fig3-27-flatpak-list.png)

---

## Installing Desktop Environments

### Available Desktop Environments
- **GNOME**: www.gnome.org
- **KDE**: www.kde.org  
- **Xfce**: www.xfce.org
- **LXDE/LXQT**: Lightweight environments
- **Pantheon**: Elementary OS default

### Installing KDE Plasma on Fedora

#### Using Group Install
```bash
# List available KDE groups
dnf group list --all | grep "KDE"

# Install KDE Plasma Workspaces
sudo dnf groupinstall "KDE Plasma Workspaces"

# Alternative installation method
sudo dnf install @kde-desktop-environment
```

![Figure 3.28 – Installing the KDE Plasma DE](images/fig3-28-kde-install.png)

#### Switching Desktop Environments
1. Log out of current session
2. On login screen, select user
3. Click wheel icon in bottom-right corner
4. Choose Plasma (Wayland or X11)

![Figure 3.29 – Selecting Plasma (Wayland) on the login screen](images/fig3-29-plasma-select.png)

![Figure 3.30 – Info Center in KDE Plasma on Fedora 37](images/fig3-30-kde-info.png)

---

## Package Manager Comparison

| Feature | APT (Debian/Ubuntu) | YUM/DNF (RHEL/Fedora) | Zypper (openSUSE) |
|---------|-------------------|----------------------|-------------------|
| Low-level tool | dpkg | rpm | rpm |
| High-level tool | apt | yum/dnf | zypper |
| Install command | apt install | yum install | zypper install |
| Remove command | apt remove | yum remove | zypper remove |
| Update command | apt update | yum upgrade | zypper update |
| Search command | apt search | yum search | zypper search |
| Info command | apt show | yum info | zypper info |
| List command | apt list | yum list | zypper search -i |

---

## Key Concepts

### Package Managers Types
- **Low-level**: Handle backend operations (dpkg, rpm)
- **High-level**: Handle dependencies and repositories (apt, yum/dnf, zypper)

### New Package Types Benefits
- **Cross-distribution compatibility**
- **Reduced packaging effort for ISVs**
- **Centralized distribution** (Snap Store, Flathub)
- **Enhanced security** through sandboxing
- **Simplified dependency management**

### Important Notes
- Default action in Fedora/RHEL: Press Enter = "No"
- Default action in Ubuntu: Press Enter = "Yes"
- Always backup before major system upgrades
- Snap packages auto-update by default
- Flatpaks focus on desktop applications only
- Multiple package managers can coexist on same system

---

## Summary
This chapter covered comprehensive package management across major Linux distributions, including traditional DEB/RPM packages and modern Snap/Flatpak formats. Understanding these tools is essential for effective Linux system administration and enables you to maintain, update, and customize your Linux systems efficiently.