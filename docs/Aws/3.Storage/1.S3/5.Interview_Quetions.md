## Comprehensive S3 Interview Questions

### Basic Level Questions

#### 1. What is Amazon S3?
**Answer:** Amazon Simple Storage Service (S3) is an object storage service that offers scalability, data availability, security, and performance. It's designed to store and retrieve any amount of data from anywhere.

#### 2. What are S3 storage classes?
**Answer:**
- **Standard**: Frequently accessed data
- **Intelligent-Tiering**: Automatic cost optimization
- **Standard-IA**: Infrequently accessed data
- **One Zone-IA**: Lower cost for infrequent access
- **Glacier Instant Retrieval**: Archive with instant access
- **Glacier Flexible Retrieval**: Archive with 1-5 minute retrieval
- **Glacier Deep Archive**: Lowest cost archive
- **Reduced Redundancy**: (Deprecated)

#### 3. What is S3 bucket versioning?
**Answer:** Versioning keeps multiple variants of an object in the same bucket. It protects against accidental deletion and overwrites.

#### 4. What are S3 access controls?
**Answer:**
- **Bucket Policies**: JSON-based access policies
- **ACLs**: Access Control Lists (legacy)
- **IAM Policies**: Identity-based permissions
- **Bucket ACLs**: Bucket-level access control

#### 5. What is S3 Transfer Acceleration?
**Answer:** Uses CloudFront edge locations to accelerate uploads to S3 by routing through AWS backbone network.

### Intermediate Level Questions

#### 6. Explain S3 Cross-Region Replication (CRR)
**Answer:** 
- Automatic replication of objects across different AWS regions
- Requires versioning enabled on both source and destination
- Uses IAM role for replication permissions
- Supports different storage classes in destination

#### 7. What is S3 Event Notification?
**Answer:** S3 can send notifications when certain events occur (PUT, POST, DELETE). Destinations include:
- SNS topics
- SQS queues
- Lambda functions
- EventBridge

#### 8. How does S3 consistency work?
**Answer:** S3 provides strong read-after-write consistency for all operations. After successful PUT/DELETE, subsequent reads will return the latest version.

#### 9. What is S3 Multipart Upload?
**Answer:**
- Upload large objects in parts (5MB to 5GB per part)
- Improves throughput and recovery
- Minimum part size: 5MB (except last part)
- Maximum parts: 10,000

#### 10. Explain S3 lifecycle policies
**Answer:** Automated rules to transition objects between storage classes or delete objects after specified time periods.

### Advanced Level Questions

#### 11. How do you secure S3 data?
**Answer:**
- **Encryption in Transit**: HTTPS/TLS
- **Encryption at Rest**: SSE-S3, SSE-KMS, SSE-C
- **Bucket Policies**: Fine-grained access control
- **VPC Endpoints**: Private connectivity
- **Access Logging**: CloudTrail and S3 access logs
- **MFA Delete**: Require MFA for object deletion

#### 12. What is S3 Select?
**Answer:** Retrieve subset of data from objects using SQL expressions. Works with CSV, JSON, and Parquet formats. Reduces data transfer and improves performance.

#### 13. Explain S3 Cross-Account Access patterns
**Answer:**
- **Bucket Policies**: Grant permissions to external accounts
- **AssumeRole**: Cross-account role assumption
- **Resource-based policies**: Direct resource access
- **Federated Access**: Through STS temporary credentials

#### 14. What is S3 Object Lock?
**Answer:**
- WORM (Write Once Read Many) protection
- **Retention modes**: Governance and Compliance
- **Legal Hold**: Indefinite protection
- Prevents object deletion/modification for specified period

#### 15. How does S3 pricing work?
**Answer:**
- **Storage**: Per GB-month
- **Requests**: GET, PUT, DELETE operations
- **Data Transfer**: Out of S3 to internet
- **Storage Management**: Inventory, analytics, object tagging

### Scenario-Based Questions

#### 16. How would you migrate 10TB data to S3?
**Answer:**
1. **Assessment**: Data size, network bandwidth, timeline
2. **Methods**:
   - **AWS CLI/SDK**: For good network connectivity
   - **AWS DataSync**: Automated transfer
   - **AWS Snowball**: For limited bandwidth
   - **Direct Connect**: For consistent large transfers
3. **Optimization**: Multipart upload, multiple threads

#### 17. Design a backup solution using S3
**Answer:**
```
Application Data → S3 Standard (Hot backups)
       ↓
Lifecycle Policy (30 days)
       ↓
S3 Standard-IA (Warm backups)
       ↓
Lifecycle Policy (90 days)
       ↓
S3 Glacier (Cold backups)
       ↓
Lifecycle Policy (365 days)
       ↓
S3 Glacier Deep Archive (Archive)
```

#### 18. How to handle S3 performance optimization?
**Answer:**
- **Request patterns**: Avoid sequential key names
- **Prefix distribution**: Randomize object keys
- **Multipart upload**: For objects >100MB
- **Transfer Acceleration**: For global uploads
- **CloudFront**: For frequently accessed content
- **VPC Endpoints**: Reduce latency and costs

#### 19. Troubleshoot slow S3 uploads
**Answer:**
1. **Network**: Check bandwidth and latency
2. **Key naming**: Avoid hot-spotting with sequential names
3. **Multipart**: Use for large files
4. **Threads**: Increase concurrent connections
5. **Transfer Acceleration**: Enable if global
6. **Monitoring**: CloudWatch metrics analysis

#### 20. S3 vs EFS vs EBS comparison
**Answer:**
| Feature | S3 | EFS | EBS |
|---------|----|----|-----|
| Type | Object | File | Block |
| Scalability | Unlimited | Unlimited | Limited |
| Durability | 99.999999999% | 99.999999999% | 99.999% |
| Availability | 99.99% | 99.99% | 99.999% |
| Access | REST API | NFS | Block device |
| Cost | Per GB stored | Per GB used | Per GB provisioned |

### Performance & Monitoring Questions

#### 21. What S3 metrics should you monitor?
**Answer:**
- **BucketRequests**: Request volume
- **BucketSizeBytes**: Storage utilization
- **NumberOfObjects**: Object count
- **AllRequests**: Total request rate
- **4xxErrors/5xxErrors**: Error rates
- **FirstByteLatency**: Response time

#### 22. How to optimize S3 costs?
**Answer:**
- **Storage classes**: Use appropriate tiers
- **Lifecycle policies**: Automatic transitions
- **Intelligent Tiering**: Automatic optimization
- **Delete incomplete uploads**: Clean up multipart
- **Compression**: Reduce storage size
- **Reserved Capacity**: For predictable workloads

### Integration Questions

#### 23. How does S3 integrate with Lambda?
**Answer:**
- **Event triggers**: S3 events invoke Lambda
- **Data processing**: Lambda processes S3 objects
- **Permissions**: IAM roles for access
- **Limitations**: 15-minute timeout, memory limits

#### 24. S3 and CloudFront integration
**Answer:**
- **Origin**: S3 bucket as CloudFront origin
- **OAI**: Origin Access Identity for security
- **Caching**: Edge location content caching
- **SSL**: HTTPS communication
- **Compression**: Automatic gzip compression

#### 25. How to implement S3 disaster recovery?
**Answer:**
1. **Cross-Region Replication**: Automatic replication
2. **Versioning**: Protect against corruption
3. **MFA Delete**: Prevent accidental deletion
4. **Backup Strategy**: Multiple regions
5. **Testing**: Regular DR exercises
6. **Monitoring**: Replication status tracking

### Troubleshooting Questions

#### 26. Common S3 error codes and solutions
**Answer:**
- **403 Forbidden**: Check bucket policy/IAM permissions
- **404 Not Found**: Verify bucket/object name and region
- **500 Internal Error**: Retry with exponential backoff
- **503 Slow Down**: Reduce request rate
- **400 Bad Request**: Check request format

#### 27. How to debug S3 access issues?
**Answer:**
1. **CloudTrail**: API call logging
2. **S3 Access Logs**: Request-level logging
3. **IAM Policy Simulator**: Test permissions
4. **Bucket Policy**: Verify JSON syntax
5. **VPC Endpoints**: Check route tables
6. **DNS**: Verify bucket name resolution

### Security Questions

#### 28. Implement S3 bucket security best practices
**Answer:**
- **Block Public Access**: Enable all settings
- **Bucket Policies**: Least privilege principle
- **Encryption**: Enable default encryption
- **Versioning**: Enable for data protection
- **Logging**: Enable access and CloudTrail logs
- **MFA**: Require for sensitive operations

#### 29. What is S3 bucket policy vs IAM policy?
**Answer:**
- **Bucket Policy**: Resource-based, attached to bucket
- **IAM Policy**: Identity-based, attached to users/roles
- **Use Cases**: Bucket policies for cross-account, IAM for same-account
- **Evaluation**: Both policies must allow access

#### 30. How to implement data governance in S3?
**Answer:**
- **Object Tagging**: Metadata for classification
- **Lifecycle Policies**: Automated management
- **Access Logging**: Audit trail
- **Inventory**: Regular reporting
- **Compliance**: Object Lock for regulatory requirements
- **Encryption**: Data protection at rest

---

## Quick Command Reference

### AWS CLI Commands:
```bash
# List buckets
aws s3 ls

# List objects
aws s3 ls s3://bucket-name/

# Copy file
aws s3 cp file.txt s3://bucket-name/

# Sync directory
aws s3 sync ./local-dir s3://bucket-name/

# Presigned URL
aws s3 presign s3://bucket-name/object --expires-in 3600
```

### Boto3 Quick Examples:
```python
import boto3

s3 = boto3.client('s3')

# List buckets
response = s3.list_buckets()

# List objects
response = s3.list_objects_v2(Bucket='bucket-name')

# Upload file
s3.upload_file('local-file', 'bucket-name', 'key')

# Download file
s3.download_file('bucket-name', 'key', 'local-file')
```