# Comprehensive EBS Interview Questions & Answers

## Basic Level Questions (1-15)

### 1. What is Amazon EBS?
**Answer:** Amazon Elastic Block Store (EBS) is a high-performance block storage service designed for use with Amazon EC2 instances. It provides persistent, scalable storage volumes that can be attached to EC2 instances and persist independently of instance lifecycle.

### 2. What are the different EBS volume types?
**Answer:**
- **gp3 (General Purpose SSD)**: Latest generation, 3,000 IOPS baseline, up to 16,000 IOPS
- **gp2 (General Purpose SSD)**: Previous generation, 3 IOPS per GB baseline
- **io2 (Provisioned IOPS SSD)**: Up to 64,000 IOPS, 99.999% durability
- **io1 (Provisioned IOPS SSD)**: Up to 64,000 IOPS, legacy version
- **st1 (Throughput Optimized HDD)**: For frequently accessed, throughput-intensive workloads
- **sc1 (Cold HDD)**: Lowest cost for infrequently accessed workloads

### 3. What is the difference between EBS and Instance Store?
**Answer:**
| Feature | EBS | Instance Store |
|---------|-----|----------------|
| Persistence | Data persists after instance termination | Data lost on instance stop/termination |
| Durability | 99.999% to 99.9999% | Dependent on underlying hardware |
| Backup | Snapshots to S3 | Manual backup required |
| Performance | Network-attached, consistent | Physically attached, higher IOPS |
| Cost | Pay for provisioned storage | Included with instance cost |

### 4. Can you attach one EBS volume to multiple EC2 instances?
**Answer:** Yes, but only with **Multi-Attach** feature available for **io1 and io2** volume types. Regular EBS volumes can only be attached to one instance at a time. Multi-Attach requires cluster-aware file systems.

### 5. What is EBS snapshot?
**Answer:** EBS snapshots are point-in-time copies of EBS volumes stored in Amazon S3. They are incremental backups, meaning only changed blocks since the last snapshot are stored, reducing storage costs and backup time.

### 6. How is EBS different from S3?
**Answer:**
- **EBS**: Block-level storage, attached to EC2, file system required, network latency
- **S3**: Object storage, REST API access, globally accessible, internet latency
- **Use cases**: EBS for OS/databases, S3 for backup/static content

### 7. What is EBS encryption?
**Answer:** EBS encryption provides end-to-end encryption using AWS KMS keys. It encrypts:
- Data at rest in the volume
- Data in transit between volume and instance
- All snapshots created from encrypted volumes
- All volumes created from encrypted snapshots

### 8. Can you change EBS volume type after creation?
**Answer:** Yes, you can modify EBS volume type, size, and IOPS without detaching from instance using **Elastic Volumes** feature. Changes take effect immediately but may require file system extension.

### 9. What is EBS-optimized instance?
**Answer:** EBS-optimized instances provide dedicated bandwidth for EBS I/O, separate from network traffic. This ensures consistent performance and lower latency for EBS operations. Most current generation instances are EBS-optimized by default.

### 10. How do you monitor EBS performance?
**Answer:** Using **Amazon CloudWatch** metrics:
- **VolumeReadOps/VolumeWriteOps**: IOPS metrics
- **VolumeQueueLength**: Average queue length
- **VolumeThroughputPercentage**: Throughput utilization
- **VolumeConsumedReadWriteOps**: Consumed IOPS for gp2
- **BurstBalance**: Burst bucket balance for gp2

### 11. What happens to EBS volume when EC2 instance is terminated?
**Answer:** Depends on **DeleteOnTermination** attribute:
- **Root volume**: Deleted by default (can be changed)
- **Additional volumes**: Retained by default (can be changed)
- This setting can be modified during launch or after instance creation

### 12. What is the maximum size of an EBS volume?
**Answer:**
- **gp3, gp2, io1, io2**: 16 TiB (16,384 GiB)
- **st1, sc1**: 16 TiB (16,384 GiB)
- **Boot volumes**: 16 TiB for most AMIs

### 13. Can you take snapshots of running volumes?
**Answer:** Yes, snapshots can be taken while volumes are in use. However, for consistency:
- **File system level**: Flush buffers and freeze I/O if possible
- **Database**: Use application-consistent snapshot techniques
- **Best practice**: Take snapshots during low I/O periods

### 14. What is EBS burst performance?
**Answer:** **gp2 volumes** can burst up to 3,000 IOPS when they have burst credits. Volumes earn burst credits at 3 IOPS per GB of volume size. Smaller volumes can burst to 3,000 IOPS temporarily using accumulated credits.

### 15. How do you increase EBS volume size?
**Answer:**
1. **Modify volume** in EC2 console or AWS CLI
2. **Extend partition** (if using partitions)
3. **Extend file system**: `resize2fs` (ext4) or `xfs_growfs` (XFS)
4. **No downtime required** for most operations

---

## Intermediate Level Questions (16-30)

### 16. Explain EBS Multi-Attach feature
**Answer:** Multi-Attach allows attaching single **io1 or io2** volume to multiple EC2 instances simultaneously:
- **Use cases**: Shared storage for clusters, high availability applications
- **Requirements**: Cluster-aware file systems (GFS2, OCFS2)
- **Limitations**: Maximum 16 instances, same AZ only
- **Applications must handle**: Concurrent access, data consistency

### 17. How does EBS snapshot pricing work?
**Answer:**
- **Storage cost**: Pay for actual data stored (incremental)
- **First snapshot**: Full volume size
- **Subsequent snapshots**: Only changed blocks
- **Cross-region copy**: Additional charges for data transfer
- **Lifecycle**: Can automate deletion with DLM (Data Lifecycle Manager)

### 18. What is EBS Fast Snapshot Restore (FSR)?
**Answer:** FSR eliminates the latency of restoring data from S3 when creating volumes from snapshots:
- **Benefits**: Instant access to full volume performance
- **Cost**: Additional charges per snapshot per AZ
- **Use cases**: Critical applications requiring immediate performance
- **Limitations**: Limited number of FSR-enabled snapshots per region

### 19. How do you optimize EBS costs?
**Answer:**
1. **Right-sizing**: Monitor and adjust volume sizes
2. **Volume types**: Use appropriate types (gp3 vs gp2)
3. **Snapshot lifecycle**: Automate old snapshot deletion
4. **Unused volumes**: Identify and delete unattached volumes
5. **Reserved capacity**: For predictable workloads
6. **Monitoring**: Use Cost Explorer and CloudWatch

### 20. Explain EBS performance factors
**Answer:**
- **Instance type**: CPU, memory, and EBS bandwidth limits
- **Volume type**: IOPS and throughput specifications
- **Volume size**: Affects baseline performance (gp2)
- **Network**: Instance network performance affects EBS
- **I/O patterns**: Sequential vs random, block size
- **Queue depth**: Higher queue depth improves throughput

### 21. What is the difference between io1 and io2?
**Answer:**
| Feature | io1 | io2 |
|---------|-----|-----|
| Durability | 99.999% | 99.9999% |
| IOPS ratio | 50:1 | 500:1 |
| Maximum IOPS | 64,000 | 64,000 |
| Multi-Attach | Yes | Yes |
| Performance consistency | Good | Better |

### 22. How do you troubleshoot EBS performance issues?
**Answer:**
1. **Check instance limits**: EBS bandwidth, network performance
2. **Monitor CloudWatch**: Queue length, IOPS utilization
3. **Verify EBS-optimized**: Ensure dedicated EBS bandwidth
4. **Application level**: Check I/O patterns, block sizes
5. **File system**: Verify alignment, mount options
6. **Network**: Check for network bottlenecks

### 23. What is EBS volume initialization?
**Answer:** New volumes created from snapshots don't need initialization, but volumes created from scratch need to be initialized:
- **New volumes**: No initialization needed
- **Restored volumes**: Data is lazy-loaded from S3
- **Performance impact**: First access to each block may have higher latency
- **Pre-warming**: Can read entire volume to initialize all blocks

### 24. How do you migrate EBS volumes across regions?
**Answer:**
1. **Create snapshot** of source volume
2. **Copy snapshot** to destination region
3. **Create volume** from copied snapshot
4. **Launch instance** in destination region
5. **Attach volume** to new instance
6. **Alternative**: Use AWS DataSync or AWS Application Migration Service

### 25. What are EBS volume limits?
**Answer:**
- **Per instance**: 28 volumes (including root)
- **Per region**: 20,000 snapshots, 5,000 volumes by default
- **Snapshot frequency**: No specific limits, but consider performance impact
- **Size limits**: 16 TiB for most volume types
- **IOPS limits**: Depend on volume type and instance capabilities

### 26. Explain EBS encryption key management
**Answer:**
- **Default encryption**: Uses AWS managed key (aws/ebs)
- **Customer managed**: Create and manage your own KMS keys
- **Cross-account**: Share encrypted snapshots using key policies
- **Key rotation**: Automatic rotation for AWS managed keys
- **Performance**: Minimal impact on EBS performance

### 27. What is EBS Direct APIs?
**Answer:** EBS Direct APIs allow direct access to EBS snapshots:
- **Use cases**: Backup solutions, disaster recovery tools
- **APIs**: ListSnapshotBlocks, GetSnapshotBlock, PutSnapshotBlock
- **Benefits**: Incremental backups, faster restores
- **Applications**: Third-party backup tools, custom solutions

### 28. How do you handle EBS volume corruption?
**Answer:**
1. **Immediate**: Stop writing to volume
2. **Assessment**: Check file system errors (`fsck`)
3. **Recovery**: 
   - Restore from latest snapshot
   - Use file system repair tools
   - Mount read-only to copy data
4. **Prevention**: Regular snapshots, monitoring, redundancy

### 29. What is EBS CSI driver?
**Answer:** Container Storage Interface driver for Kubernetes:
- **Function**: Provides persistent storage for containers
- **Features**: Dynamic provisioning, volume snapshots, encryption
- **Integration**: Works with EKS, self-managed Kubernetes
- **Benefits**: Native Kubernetes storage management

### 30. How do you automate EBS operations?
**Answer:**
- **AWS CLI/SDK**: Scripted operations
- **CloudFormation**: Infrastructure as code
- **Lambda functions**: Event-driven automation
- **Data Lifecycle Manager**: Automated snapshot management
- **Systems Manager**: Maintenance automation
- **EventBridge**: Event-based triggers

---

## Advanced Level Questions (31-45)

### 31. Design a high-performance database storage solution using EBS
**Answer:**
```
Database Design:
- Volume Type: io2 (consistent performance)
- Size: 4 TiB per volume
- IOPS: 20,000 per volume
- Configuration: RAID 0 across 4 volumes
- Total: 16 TiB, 80,000 IOPS
- Instance: r5.8xlarge (EBS-optimized)
- Placement: Single AZ for low latency
- Backup: Automated snapshots every 4 hours
- Monitoring: Custom CloudWatch dashboards
```

### 32. How would you implement disaster recovery for EBS-based applications?
**Answer:**
```
DR Strategy:
1. Cross-region snapshot replication
2. Automated AMI creation with EBS volumes
3. Lambda-based recovery automation
4. RTO: < 15 minutes, RPO: < 1 hour
5. Components:
   - Primary: us-east-1
   - DR: us-west-2
   - Automated failover with Route 53
   - Data consistency checks
   - Regular DR testing
```

### 33. Explain EBS performance troubleshooting methodology
**Answer:**
```
Systematic Approach:
1. Baseline establishment
   - Normal IOPS, throughput, latency
   - Application performance metrics
2. Problem identification
   - CloudWatch metrics analysis
   - Application-level monitoring
3. Root cause analysis
   - Instance limits vs EBS limits
   - Network vs storage bottlenecks
   - I/O pattern analysis
4. Resolution
   - Volume type/size adjustments
   - Instance optimization
   - Application tuning
```

### 34. How do you optimize costs for a large EBS deployment?
**Answer:**
```
Cost Optimization Strategy:
1. Volume analysis
   - Utilization monitoring
   - Right-sizing recommendations
   - gp2 to gp3 migration
2. Snapshot management
   - Automated lifecycle policies
   - Cross-region optimization
   - Deduplication strategies
3. Reserved capacity
   - Predictable workload analysis
   - Commitment planning
4. Monitoring and alerting
   - Cost anomaly detection
   - Usage optimization alerts
```

### 35. Design an EBS backup strategy for enterprise applications
**Answer:**
```
Enterprise Backup Strategy:
1. Tiered backup approach
   - Real-time: Application-level replication
   - Hourly: EBS snapshots
   - Daily: Cross-region snapshots
   - Weekly: Long-term archive
2. Compliance requirements
   - 7-year retention for financial data
   - Encryption at rest and in transit
   - Access logging and auditing
3. Automation
   - DLM policies for lifecycle
   - Lambda for custom logic
   - SNS notifications for failures
4. Testing
   - Monthly restore tests
   - RTO/RPO validation
```

---

## Scenario-Based Questions (36-50)

### 36. Your application requires 50,000 IOPS. How would you design the storage?
**Answer:**
```
High IOPS Design:
1. Instance selection
   - i3.4xlarge or higher (62,500 IOPS limit)
   - Or multiple smaller instances with load balancing
2. EBS configuration
   - io2 volumes with Multi-Attach
   - Multiple volumes across instances
   - 4 × io2 volumes with 12,500 IOPS each
3. Application architecture
   - Cluster-aware file system (GFS2)
   - Load balancing across instances
   - Connection pooling
4. Monitoring
   - Real-time IOPS tracking
   - Performance alerting
```

### 37. How would you migrate 100TB of data from on-premises to EBS?
**Answer:**
```
Large-scale Migration Strategy:
1. Assessment phase
   - Data classification and prioritization
   - Network bandwidth analysis
   - Downtime requirements
2. Migration methods
   - AWS DataSync for active migration
   - AWS Snowball family for bulk transfer
   - Direct Connect for ongoing sync
3. EBS preparation
   - Pre-create volumes and snapshots
   - Optimize volume types and sizes
   - Plan encryption strategy
4. Execution
   - Parallel transfers
   - Incremental synchronization
   - Validation and testing
```

### 38. An EBS volume is showing high latency. How do you troubleshoot?
**Answer:**
```
Latency Troubleshooting:
1. Immediate checks
   - CloudWatch EBS metrics
   - Instance CPU/memory utilization
   - Network performance metrics
2. EBS-specific analysis
   - Volume queue length
   - IOPS vs provisioned capacity
   - Burst balance (for gp2)
3. Instance analysis
   - EBS optimization enabled
   - Instance bandwidth limits
   - Competing workloads
4. Resolution options
   - Volume type upgrade (gp2 → gp3)
   - Instance type upgrade
   - I/O optimization
```

### 39. Design a cost-effective storage solution for log files
**Answer:**
```
Log Storage Strategy:
1. Tiered storage approach
   - Active logs: gp3 EBS (recent 30 days)
   - Archive logs: S3 Standard-IA (30-90 days)
   - Long-term: S3 Glacier (>90 days)
2. Automation
   - Lambda functions for log processing
   - Lifecycle policies for transitions
   - Automated compression and cleanup
3. Access patterns
   - Frequent access: EBS
   - Occasional access: S3
   - Compliance archive: Glacier
4. Cost optimization
   - Right-sized EBS volumes
   - Intelligent tiering
   - Regular cost reviews
```

### 40. How would you handle EBS volume failure in production?
**Answer:**
```
Failure Response Plan:
1. Detection
   - CloudWatch alarms
   - Application health checks
   - Automated monitoring
2. Immediate response
   - Switch to standby volume/instance
   - Isolate failed volume
   - Assess data integrity
3. Recovery options
   - Restore from latest snapshot
   - Failover to replica
   - Reconstruct from backups
4. Prevention
   - Regular snapshot schedule
   - Multi-AZ deployment
   - Health monitoring
```

### 41. Optimize EBS performance for a database workload
**Answer:**
```
Database Optimization:
1. Volume configuration
   - io2 for consistent performance
   - Separate volumes for data/logs/temp
   - Optimal IOPS provisioning
2. Instance optimization
   - EBS-optimized instances
   - Sufficient RAM for caching
   - CPU resources for I/O processing
3. File system tuning
   - Proper alignment (4KB blocks)
   - Mount options (noatime, etc.)
   - XFS for large files
4. Application tuning
   - Connection pooling
   - Query optimization
   - Buffer pool sizing
```

### 42. Implement automated EBS snapshot management
**Answer:**
```python
# Lambda function for snapshot management
import boto3
from datetime import datetime, timedelta

def lambda_handler(event, context):
    ec2 = boto3.client('ec2')
    
    # Create snapshots
    volumes = ec2.describe_volumes(
        Filters=[{'Name': 'tag:Backup', 'Values': ['true']}]
    )
    
    for volume in volumes['Volumes']:
        snapshot = ec2.create_snapshot(
            VolumeId=volume['VolumeId'],
            Description=f"Auto snapshot {datetime.now()}",
            TagSpecifications=[{
                'ResourceType': 'snapshot',
                'Tags': [
                    {'Key': 'AutoCreated', 'Value': 'true'},
                    {'Key': 'RetentionDays', 'Value': '30'}
                ]
            }]
        )
    
    # Delete old snapshots
    cutoff_date = datetime.now() - timedelta(days=30)
    old_snapshots = ec2.describe_snapshots(
        OwnerIds=['self'],
        Filters=[
            {'Name': 'tag:AutoCreated', 'Values': ['true']},
            {'Name': 'start-time', 'Values': [f'<{cutoff_date.isoformat()}']}
        ]
    )
    
    for snapshot in old_snapshots['Snapshots']:
        ec2.delete_snapshot(SnapshotId=snapshot['SnapshotId'])
```

### 43. How would you monitor and alert on EBS performance degradation?
**Answer:**
```
Monitoring Strategy:
1. CloudWatch metrics
   - VolumeQueueLength > 32 (alert)
   - VolumeLatency > 10ms (warning)
   - BurstBalance < 20% (gp2 alert)
2. Custom metrics
   - Application response time
   - Database query performance
   - I/O wait time
3. Alerting
   - SNS notifications
   - PagerDuty integration
   - Slack/Teams notifications
4. Dashboards
   - Real-time performance views
   - Historical trend analysis
   - Capacity planning metrics
```

### 44. Design EBS architecture for multi-tier application
**Answer:**
```
Multi-tier EBS Architecture:
1. Web tier
   - gp3 volumes for OS and logs
   - Small volumes (20-50 GB)
   - Auto Scaling with EBS templates
2. Application tier
   - gp3 for application data
   - Medium volumes (100-500 GB)
   - Snapshot-based AMIs
3. Database tier
   - io2 for database files
   - st1 for backup storage
   - Separate volumes for data/logs
4. Shared storage
   - Multi-Attach for shared configs
   - EFS for truly shared data
```

### 45. Implement EBS encryption compliance strategy
**Answer:**
```
Encryption Compliance:
1. Policy enforcement
   - Require encryption by default
   - Block unencrypted volume creation
   - Service Control Policies (SCPs)
2. Key management
   - Customer-managed KMS keys
   - Key rotation policies
   - Cross-account sharing
3. Monitoring
   - Config rules for compliance
   - CloudTrail for key usage
   - Regular compliance audits
4. Automation
   - Encrypt existing volumes
   - Automated remediation
   - Compliance reporting
```

---

## Performance & Troubleshooting Questions (46-50)

### 46. What causes EBS performance inconsistency?
**Answer:**
- **Burst credit depletion** (gp2 volumes)
- **Instance bandwidth limits** exceeded
- **Network congestion** affecting EBS traffic
- **Noisy neighbor** effects in multi-tenant environment
- **I/O pattern changes** (random vs sequential)
- **Queue depth** not optimized for workload

### 47. How do you benchmark EBS performance?
**Answer:**
```bash
# Random IOPS test
fio --filename=/dev/xvdf --direct=1 --rw=randread --bs=4k --ioengine=libaio --iodepth=256 --runtime=120 --numjobs=4 --time_based --group_reporting --name=iops-test

# Sequential throughput test  
fio --filename=/dev/xvdf --direct=1 --rw=read --bs=1M --ioengine=libaio --iodepth=4 --runtime=120 --numjobs=4 --time_based --group_reporting --name=throughput-test

# Mixed workload test
fio --filename=/dev/xvdf --direct=1 --rw=randrw --rwmixread=70 --bs=4k --ioengine=libaio --iodepth=32 --runtime=300 --time_based --group_reporting --name=mixed-test
```

### 48. How do you optimize EBS for Big Data workloads?
**Answer:**
```
Big Data Optimization:
1. Volume configuration
   - st1 for sequential reads (Hadoop)
   - Multiple volumes in RAID 0
   - Large volume sizes for better throughput
2. Instance selection
   - Storage-optimized instances (i3, d2)
   - High network bandwidth
   - Multiple EBS volumes per instance
3. Data organization
   - Partition data appropriately
   - Compress data where possible
   - Use columnar formats (Parquet)
4. Caching strategies
   - Instance store for temporary data
   - Memory caching for hot data
```

### 49. What are the security best practices for EBS?
**Answer:**
```
EBS Security Best Practices:
1. Encryption
   - Enable default encryption
   - Use customer-managed KMS keys
   - Encrypt snapshots
2. Access control
   - IAM policies for EBS operations
   - Resource-based policies
   - Cross-account sharing controls
3. Monitoring
   - CloudTrail for API calls
   - Config for compliance
   - GuardDuty for threats
4. Data protection
   - Regular snapshots
   - Cross-region backups
   - Versioning strategies
```

### 50. How do you plan EBS capacity for growing applications?
**Answer:**
```
Capacity Planning Strategy:
1. Usage analysis
   - Historical growth patterns
   - Seasonal variations
   - Business growth projections
2. Monitoring setup
   - CloudWatch metrics
   - Custom application metrics
   - Trend analysis tools
3. Scaling strategy
   - Automated volume expansion
   - Predictive scaling
   - Performance headroom planning
4. Cost optimization
   - Right-sizing recommendations
   - Reserved capacity planning
   - Storage class optimization
```

---

## Quick Reference

### EBS Volume Types Comparison:
| Type | Use Case | Max IOPS | Max Throughput | Durability |
|------|----------|----------|----------------|------------|
| gp3 | General purpose | 16,000 | 1,000 MiB/s | 99.999% |
| gp2 | General purpose | 16,000 | 250 MiB/s | 99.999% |
| io2 | High performance | 64,000 | 1,000 MiB/s | 99.9999% |
| io1 | High performance | 64,000 | 1,000 MiB/s | 99.999% |
| st1 | Throughput optimized | 500 | 500 MiB/s | 99.999% |
| sc1 | Cold storage | 250 | 250 MiB/s | 99.999% |

### Common CLI Commands:
```bash
# Create volume
aws ec2 create-volume --size 100 --volume-type gp3 --availability-zone us-east-1a

# Attach volume
aws ec2 attach-volume --volume-id vol-xxx --instance-id i-xxx --device /dev/sdf

# Create snapshot
aws ec2 create-snapshot --volume-id vol-xxx --description "Backup"

# Modify volume
aws ec2 modify-volume --volume-id vol-xxx --size 200 --volume-type gp3
```