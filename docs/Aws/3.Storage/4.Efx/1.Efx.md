# Amazon FSx - AWS Study Notes

## Overview

Amazon FSx provides fully managed third-party file systems with native compatibility for various workloads including:
- Windows-based storage
- High-performance computing (HPC)
- Machine learning
- Electronic design automation (EDA)

### Key Benefits
- No management of file servers and storage required
- Automated administration tasks (hardware provisioning, software configuration, patching, backups)
- Integration with cloud-native AWS services
- Pay-only-for-what-you-use pricing model

## Available File Systems

Amazon FSx offers four file system options:

1. **Amazon FSx for Windows File Server** - Windows-based applications
2. **Amazon FSx for Lustre** - Compute-intensive workloads
3. **Amazon FSx for NetApp ONTAP**
4. **Amazon FSx for OpenZFS**

---

## Amazon FSx for Windows File Server

### Overview
- Fully managed native Microsoft Windows file system
- Easy migration of Windows-based applications requiring shared file storage
- Built on Windows Server with full compatibility

### Key Features
- **Protocol Support**: Full SMB protocol support
- **File System**: Windows NTFS
- **Integration**: Microsoft Active Directory (AD) integration
- **Storage**: SSD storage for fast performance with low latency
- **Cost Optimization**: Data Deduplication (50-60% cost reduction)

### High Availability & Multi-AZ
- **Single AZ**: Automatic data replication within AZ, continuous hardware monitoring
- **Multi-AZ**: Active and standby file servers in separate AZs with synchronous replication

### Windows-Native Features
- Access Control Lists (ACLs)
- Shadow copies
- User quotas
- NTFS file systems accessible from thousands of compute instances via SMB

### Performance
- Up to 2 GB/second throughput per file system
- Hundreds of thousands of IOPS
- Consistent sub-millisecond latencies
- Throughput level independent of file system size
- Scale with DFS Namespaces: tens of gigabytes/second throughput, millions of IOPS

### Connectivity
- **AWS Services**: EC2, VMware Cloud on AWS, WorkSpaces, AppStream 2.0
- **On-premises**: AWS Direct Connect or AWS VPN
- **Multi-environment**: Multiple VPCs, accounts, regions via VPC Peering or Transit Gateway

### Security & Compliance
- Automatic encryption at-rest and in-transit
- ISO, PCI-DSS, and SOC certified
- HIPAA eligible
- AWS CloudTrail integration for API monitoring

### Cost Management
- No minimum commitments or up-front fees
- Data Deduplication for cost optimization
- User quotas for storage consumption tracking and control

---

## Amazon FSx for Lustre

### Overview
- High-performance file system for compute-intensive workloads
- Optimized for machine learning, HPC, video processing, financial modeling, EDA
- Fully managed Lustre file system with S3 integration

### Key Workloads
- Machine learning
- High performance computing (HPC)
- Video processing
- Financial modeling
- Electronic design automation (EDA)

### Performance Characteristics
- Hundreds of gigabytes per second throughput
- Millions of IOPS
- Sub-millisecond latencies
- Performance scales with file system size
- Metadata stored on Metadata Targets (MST)

### Lustre File System Details
- Popular open-source parallel file system
- POSIX-compliant file system interface
- Stores data across multiple networked servers
- Supports thousands of concurrent compute instances
- Designed for high throughput and low latency operations

### Amazon S3 Integration
- Native S3 integration for seamless data access
- S3 objects presented as files in the file system
- Write results back to S3
- Ideal for data processing workloads with long-term S3 storage

### On-Premises Integration
- Burst on-premises workloads to cloud
- Mount via AWS Direct Connect or VPN
- Use parallel copy tools for data import
- Write results back to data lake

### Security Features
- All file system data encrypted at rest
- Access via open-source Lustre client
- Compatible with popular Linux AMIs (Amazon Linux, RHEL, CentOS, Ubuntu, SUSE)
- VPC endpoint access for network isolation
- Security group rules for network access control
- AWS IAM integration for access management
- Resource tagging for granular access control

### Deployment Types

#### Scratch File System
- **Use Case**: Best performance for short-term/temporary workloads
- **Availability**: No HA or replication
- **Reliability**: Auto-heals on hardware failure, but larger systems have higher failure risk
- **Size**: Minimum 1.2 TiB, increments of 2.4 TiB

#### Persistent File System
- **Use Case**: Longer-term workloads
- **Availability**: HA within single AZ with self-healing
- **Performance Tiers**:
  - 50 MB/s per TiB
  - 100 MB/s per TiB  
  - 200 MB/s per TiB
- **Burst Capability**: Up to 1,300 MB/s per TiB (credit-based system)

---

## Exam Focus Areas

- FSx for Windows File Server and FSx for Lustre are the primary focus for AWS certification exams
- Understanding deployment types (Scratch vs Persistent for Lustre)
- Performance characteristics and scaling options
- Integration capabilities with other AWS services
- Security and compliance features
- Cost optimization strategies