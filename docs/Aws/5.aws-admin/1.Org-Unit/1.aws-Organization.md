# AWS Organizations - Comprehensive Study Notes

## Overview
AWS Organizations helps you centrally manage and govern your environment as you grow and scale your AWS resources. It enables management of multi-account environments with various features and controls.

**Key Image Reference**: The article includes the main AWS Organizations services diagram showing the core architecture and components.

---

## Core Concepts and Benefits

### Why Multi-Account?
- **AWS accounts are natural boundaries** for:
  - Permissions
  - Security
  - Costs
  - Workloads
- **Recommended best practice** when scaling cloud environments

### Key Features
- **Simplify account creation** - Programmatically create accounts via CLI, SDKs, or APIs
- **Organize with OUs** - Group accounts into Organizational Units for applications/services
- **Tag policies** - Classify and track resources with attribute-based access control
- **Delegate responsibility** - Allow accounts to manage supported AWS services
- **Centralized security tools** - Provide security team with organization-wide access
- **Single Sign-On (SSO)** - Access using Active Directory with role-based permissions
- **Service Control Policies (SCPs)** - Control access to resources, services, and regions
- **Resource sharing** - Share AWS resources using AWS Resource Access Manager (RAM)
- **Organization-wide CloudTrail** - Immutable logging across all accounts
- **Consolidated billing** - Single bill with usage aggregation benefits
- **Cost optimization** - Use Cost Explorer and Compute Optimizer across accounts

### Availability and Pricing
- **Available to all AWS customers** at **no additional charge**
- AWS Organizations API enables automation
- Available in **two feature sets**:
  1. **Consolidated billing** (default)
  2. **All features**

---

## Key Concepts and Terminology

### Core Components

#### **AWS Organization**
- Collection of AWS accounts organized into a hierarchy and managed centrally

#### **AWS Account**
- Container for your AWS resources

#### **Management Account**
- AWS account used to create your organization
- Has full administrative privileges

#### **Member Account**
- Any AWS account (other than management account) that's part of organization

#### **Administrative Root**
- Starting point for organizing AWS accounts
- Top-most container in organization hierarchy

#### **Organizational Unit (OU)**
- Group of AWS accounts within an organization
- Can contain other OUs to create hierarchy

#### **Policy**
- Document defining controls to apply to AWS accounts
- Primary type: **Service Control Policy (SCP)**

---

## Consolidated Billing

### Key Features
- **Separates paying accounts and linked accounts**
- **Single payment method** for all organization accounts
- **Combined view** of charges across all accounts
- **Volume discounts** from aggregated usage (EC2, S3, etc.)
- **Shared Reserved Instances** - Unused EC2 RIs applied across group

### Limits and Best Practices
- **Default limit**: 20 linked accounts for consolidated billing
- **Paying accounts** should be used for billing purposes only
- **Billing alerts** can be set up at paying account level
- Shows billing for all linked accounts

---

## Management Account Best Practices

### Security Recommendations
1. **Use management account only for required tasks**
2. **Use group email address** for root user
3. **Use complex password** for root user
4. **Enable MFA** for root user credentials
5. **Add phone number** to account contact information
6. **Review and track access** regularly
7. **Document processes** for root user credential usage
8. **Apply monitoring controls** for root user access

---

## Account Migration

### Migration Process
- **Accounts can be migrated** between organizations
- **Requires root or IAM access** to both member and management accounts

### Migration Methods
- **AWS Organizations console** - For few accounts
- **AWS Organizations API/CLI** - For many accounts

### Important Considerations
- **Billing history stays** with management account
- **Download billing reports** before migration if needed
- **Charges transfer** directly to standalone account after migration
- **Some charges likely** even for quick migrations

---

## Service Control Policies (SCPs)

### Overview and Availability
- **Organization policy type** for managing permissions
- **Central control** over maximum available permissions
- **Available only** with "all features" enabled
- **Not available** with consolidated billing only

### Key Characteristics
- **SCPs DON'T grant permissions** - they set guardrails/limits
- **Define maximum permissions** that can be delegated
- **Still need IAM policies** to grant actual permissions
- **Effective permissions** = logical intersection of SCP + IAM policies

### SCP Inheritance Rules

#### **Who SCPs Affect**
- **IAM users and roles** in member accounts (including root user)
- **Do NOT affect**:
  - Management account users/roles
  - Resource-based policies directly
  - Users/roles from outside organization
  - Service-linked roles

#### **Permission Logic**
- **Any parent restriction applies** to all children
- **Blocked at any level** = blocked everywhere below
- **Must be allowed by ALL levels** in hierarchy
- **Explicit deny always wins**

#### **Policy Interaction**
- **SCP + IAM policy both required** for access
- **No IAM policy = no access** (even with permissive SCP)
- **SCP allows + IAM allows = access granted**
- **SCP denies OR IAM missing = access denied**
- **Permissions boundary** + SCP + identity policy ALL must allow action

### SCP Management
- **Disabling SCPs** removes all attachments automatically
- **Re-enabling SCPs** reverts to default FullAWSAccess only
- **Previous attachments lost** when disabled (manual re-attachment needed)

### SCP Restrictions - Cannot Control
- **Any action by management account**
- **Service-linked role actions**
- **Enterprise support plan registration** (root user)
- **AWS support level changes** (root user)
- **CloudFront trusted signer functionality**
- **Lightsail reverse DNS configuration** (root user)
- **Specific AWS services**:
  - Alexa Top Sites
  - Alexa Web Information Service
  - Amazon Mechanical Turk
  - Amazon Product Marketing API

---

## Resource Groups

### Purpose and Functionality
- **Organize AWS resources** for easier management
- **Automate tasks** on large numbers of resources
- **Group and tag resources** systematically
- **Tag Editor** assists with finding and tagging resources

### Access Methods
- **AWS Management Console** navigation bar
- **AWS Systems Manager console** left navigation
- **Resource Groups API** via CLI/SDK

### Resource Group Requirements
- **Same AWS region** for all resources
- **Match criteria** provided in query
- **Format**: AWS::service::resource

### Query Types

#### **1. Tag-Based Queries**
- Include lists of resources and tags
- Tags are keys for resource identification/sorting
- Optional values for keys

#### **2. AWS CloudFormation Stack-Based**
- Choose CloudFormation stack in current region
- Select resource types within stack
- **Limited to one stack** per query

### Advanced Features
- **Resource groups can be nested**
- Can contain existing resource groups in same region

---

## Exam Tips and Key Points

### Critical Facts for Exams
- **No additional charge** for AWS Organizations
- **20-account limit** for consolidated billing (default)
- **SCPs only available** with "all features" enabled
- **Management account** cannot be restricted by SCPs
- **Service-linked roles** cannot be restricted by SCPs
- **Billing history** stays with management account during migration
- **Two feature sets**: consolidated billing vs. all features

### Best Practices Summary
- Use **multi-account strategy** for scaling
- **Secure management account** with MFA and complex passwords
- **Document processes** for administrative access
- **Monitor and audit** account usage and access
- **Use SCPs** for guardrails, not permission granting
- **Plan account migration** carefully with billing considerations

### Common Use Cases
- **Cost management** through consolidated billing and volume discounts
- **Security governance** through SCPs and centralized policies
- **Compliance** through organization-wide logging and controls
- **Account lifecycle management** through programmatic creation
- **Resource organization** through OUs and tagging strategies

---

## Integration with Other Services

### Security and Compliance
- **AWS CloudTrail** - Organization-wide logging
- **AWS Single Sign-On** - Centralized access management
- **AWS Resource Access Manager** - Cross-account resource sharing

### Cost Management
- **AWS Cost Explorer** - Multi-account usage analysis
- **AWS Compute Optimizer** - Organization-wide optimization
- **Reserved Instance sharing** - Automatic across organization

### Automation
- **AWS Organizations API** - Programmatic management
- **AWS CLI/SDKs** - Automated account operations
- **CloudFormation integration** - Infrastructure as code support